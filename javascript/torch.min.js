var torch={};torch.helperMethods={};torch.util={};torch.lib={};torch.util.isNegative=function(b){return b<0};torch.font=function(b,a,d,c){this.fontSize=b||10;this.fontColor=a||"black";this.fontFace=d||"sans-serif";this.fontStyle=c||"";this.makeString=function(){return this.fontStyle+" "+this.fontSize+"px "+this.fontFace}};torch.lib.baseTorchObject=function(){var a=Object.getPrototypeOf(this);a.boundAnimations=[];a.draw=function(b){};a.hitDetect=function(b,c){return false};a.tick=function(){this.tickAnimations()};a.tickAnimations=function(){for(var b=0;b<this.boundAnimations.length;b++){var e=this.boundAnimations[b];var d=e.anim;if(!d.done){var c=d.get();if(e.transMethod!=null){c=e.transMethod(c)}this[e.variable]=c;d.tick()}}};a.bindAnimationToVar=function(c,d,b){this.boundAnimations.push({anim:c,variable:d,transMethod:b})};a.focus=function(){this.hasCanvasFocus=true};a.blur=function(){this.hasCanvasFocus=false}};torch.setupInteractiveCanvas=function(a){if(a==undefined||a.getContext==undefined){return false}var c=torch;var d=torch.helperMethods;c.setupAsObjectListener(a);a.style.outline="0";a.redrawNeeded=true;a.tabIndex="444";a.pixelDensity=1;a.mousePressPos=new torch.point2d(-1,-1);a.lastMousePos=new torch.point2d(-1,-1);a.canClick=false;a.touchMap=new torch.Map();a.clickPixelThreshold=3;a.focusActive=false;a.ignoreLegacyEvents=false;d.createEventMethod(a,"click");d.createEventMethod(a,"dblclick");d.createEventMethod(a,"mousedown");d.createEventMethod(a,"mouseup");d.createEventMethod(a,"mouseover");d.createEventMethod(a,"mouseout");d.createEventMethod(a,"mousemove");d.createEventMethod(a,"touchstart");d.createEventMethod(a,"touchmove");d.createEventMethod(a,"touchend");d.createEventMethod(a,"touchcancel");d.createEventMethod(a,"keydown");d.createEventMethod(a,"keyup");d.createEventMethod(a,"keypress");a.onfocus=function(f){this.focusActive=true};a.onblur=function(h){this.focusActive=false;for(var f=0;f<this.length();f++){var g=this.getByIndex(f);if(g.hasCanvasFocus&&g.blur!=null){g.blur()}}if(this.canvasBlur!=null){this.canvasBlur(h)}};a.oncanvasdrawn=function(){this.redrawNeeded=false;var k={};k.type="ondrawn";if(this.lastMousePos.x>=0&&this.lastMousePos.y>=0){torch.helperMethods.canvasMouseDelegator(this.lastMousePos.x,this.lastMousePos.y,k,this)}for(var g=0;g<this.touchMap.length();g++){touch=this.touchMap.getByIndex(g);var h=torch.globalToLocal(touch.pageX-window.scrollX,touch.pageY-window.scrollY,this);var f=this.getContext("2d").currentTransform.inverse();var l=f.a*h.x+f.c*h.y+f.e;var j=f.b*h.x+f.d*h.y+f.f;torch.helperMethods.canvasTouchDelegator(l,j,k,touch,this)}};a.requestRedraw=function(){this.redrawNeeded=true};var b=a.getContext("2d");c.giveSmartCTM(b);return true};torch.drawController=function(a,b){if(a==undefined){return false}return setTimeout(torch.helperMethods.drawControllerHelper,b,a)};torch.helperMethods.createEventMethod=function(b,a){b["on"+a]=function(c){torch.helperMethods.canvasEventHitDetection(c,this);if(this["oncanvas"+a]!=null){return this["oncanvas"+a](c)}}};torch.helperMethods.requestRedraw=function(){if(this.listeners==undefined){return}for(var a=0;a<this.listeners.length;a++){this.listeners[a].requestRedraw()}};torch.helperMethods.drawControllerHelper=function(a){a.drawingLoop()};torch.helperMethods.giveCanvasFocus=function(){this.hasCanvasFocus=true};torch.helperMethods.clearCanvasFocus=function(){this.hasCanvasFocus=false};torch.createNewCanvasLayer=function(b,d){var c=document.createElement("canvas");c.width=b.width;c.height=b.height;c.style.position="absolute";c.style.border=b.style.border;var a=torch.localToGlobal(0,0,b);c.style.left=""+a.x+"px";c.style.top=""+a.y+"px";c.style.zIndex=""+d;document.body.appendChild(c);return c};torch.helperMethods.canvasEventHitDetection=function(b,c){var a=torch.helperMethods;if(b.type.indexOf("touch")>-1){a.canvasTouchHitDetection(b,c)}else{if(b.type.indexOf("key")>-1){a.canvasKeyEvent(b,c)}else{a.canvasMouseHitDetection(b,c)}}};torch.helperMethods.canvasMouseHitDetection=function(d,f){var b=torch.globalToLocal(d.clientX,d.clientY,f);b.x=b.x*(f.width/f.clientWidth);b.y=b.y*(f.height/f.clientHeight);var a=f.getContext("2d").currentTransform.inverse();var e=a.a*b.x+a.c*b.y+a.e;var c=a.b*b.x+a.d*b.y+a.f;torch.helperMethods.canvasMouseDelegator(e,c,d,f)};torch.helperMethods.canvasTouchHitDetection=function(e,g){var h;for(var b=0;b<e.changedTouches.length;b++){h=e.changedTouches[b];var c=torch.globalToLocal(h.pageX-window.scrollX,h.pageY-window.scrollY,g);var a=g.getContext("2d").currentTransform.inverse();var f=a.a*c.x+a.c*c.y+a.e;var d=a.b*c.x+a.d*c.y+a.f;torch.helperMethods.canvasTouchDelegator(f,d,e,h,g)}};torch.helperMethods.canvasTouchDelegator=function(e,c,g,f,d){var b=g.type;var a=f.identifier;if(b=="touchstart"){d.ignoreLegacyEvents=false}if(b=="touchmove"){d.ignoreLegacyEvents=true}if(b=="touchstart"){d["touchPressPos"+a]=new torch.point2d(e,c);d["canTap"+a]=true;d.touchMap.add(f.identifier,d.touchMap.length())}if(b=="touchend"){d.touchMap.remove(f.identifier)}d["lastTouchPos"+a]=new torch.point2d(e,c);if(b=="touchmove"&&d["canTap"+a]==true&&(d["touchPressPos"+a].x>e+d.clickPixelThreshold||d["touchPressPos"+a].x<e-d.clickPixelThreshold||d["touchPressPos"+a].y>c+d.clickPixelThreshold||d["touchPressPos"+a].y<c-d.clickPixelThreshold)){d["canTap"+a]=false}for(var h=d.length()-1;h>-1;h--){var j=d.getByIndex(h);this.evaluateAndDelegateTouchEvent(j,e,c,g,d,a)}};torch.helperMethods.evaluateAndDelegateTouchEvent=function(h,b,i,g,c,a){var f=g.type;var d=c.getContext("2d");if(h.hitDetect!=null&&h.hitDetect(b,i,d,g)){if(h["isListeningTo"+a]!=true){if(h.currentTouchCount<h.maxSimulTouches){h["isListeningTo"+a]=true;h.currentTouchCount++}else{return}}if(h.isTouchOver!=true){h.isTouchOver=true;if(h.ontouchover!=null){h.ontouchover(b,i,g,d,a)}}else{if(f=="touchend"){if(c["canTap"+a]){if(c.focusActive&&h.focus!=undefined&&h.hasCanvasFocus==false){h.focus()}if(h.ontap!=null){h.ontap(b,i,g,d,a)}}if(c.focusActive&&h.hasCanvasFocus){h.blur()}if(h.isTouchOver==true){h.isTouchOver=false;if(h.ontouchout!=null){h.ontouchout(b,i,g,d,a)}}h["isListeningTo"+a]=undefined;h.currentTouchCount--}}if(f!=null&&f!="tap"){if(h["on"+f]!=null){h["on"+f](b,i,g,d,a)}}}else{if(h["isListeningTo"+a]==true){if(c.focusActive&&h.hasCanvasFocus){h.blur()}if(h.isTouchOver==true){h.isTouchOver=false;if(h.ontouchout!=null){h.ontouchout(b,i,g,d,a)}}h["isListeningTo"+a]=undefined;h.currentTouchCount--}}};torch.helperMethods.canvasMouseDelegator=function(b,a,g,h){var e=torch;var d=g.type;h.lastMousePos=new e.point2d(b,a);if(h.ignoreLegacyEvents){if(d=="mousedown"||d=="mouseup"){return}if(d=="click"){h.ignoreLegacyEvents=false;return}}if(d=="mousedown"){h.mousePressPos=new e.point2d(b,a);h.canClick=true;h.mouseButtonDown=g.button}if((d=="mousemove")&&h.canClick==true&&(h.mousePressPos.x>b+h.clickPixelThreshold||h.mousePressPos.x<b-h.clickPixelThreshold||h.mousePressPos.y>a+h.clickPixelThreshold||h.mousePressPos.y<a-h.clickPixelThreshold)){h.canClick=false}for(var c=h.length()-1;c>-1;c--){var f=h.getByIndex(c);e.helperMethods.evaluateAndDelegateMouseEvent(f,b,a,g,h)}};torch.helperMethods.canvasKeyEvent=function(b,d){for(var a=d.length()-1;a>-1;a--){var c=d.getByIndex(a);if(c.hasCanvasFocus){if(c[b.type]!=null){c[b.type](b)}}}};torch.helperMethods.evaluateAndDelegateMouseEvent=function(f,a,g,d,b){var c=d.type;if(f.hitDetect!=null&&f.hitDetect(a,g,b.getContext("2d"),d)){if(f.isMouseOver==false){f.isMouseOver=true;if(f.onmouseover!=null){f.onmouseover(a,g,d,b.getContext("2d"))}}else{if(c=="mouseup"&&b.mouseButtonDown==d.button&&b.canClick){if(d.button==2&&f.rightclick!=null){f.rightclick(a,g,d,b.getContext("2d"))}else{if(d.button!=2){if(b.focusActive&&f.focus!=undefined&&f.hasCanvasFocus==false){f.focus()}if(f.onclick!=null){f.onclick(a,g,d,b.getContext("2d"))}}}}if(c=="mousedown"&&d.button!=2){if(b.focusActive&&f.focus!=undefined&&f.hasCanvasFocus==false){f.focus()}}}if(c!=null&&c!="click"&&c!="mouseover"){if(c=="mouseout"&&f.isMouseOver==true){f.isMouseOver=false;f.mousePressed=false;if(f.onmouseout!=null){f.onmouseout(a,g,d,b.getContext("2d"))}}else{if(f["on"+c]!=null){f["on"+c](a,g,d,b.getContext("2d"))}}}}else{if(b.focusActive&&c=="click"&&f.hasCanvasFocus){f.blur()}if(f.isMouseOver==true){f.isMouseOver=false;f.mousePressed=false;if(f.onmouseout!=null){f.onmouseout(a,g,d,b.getContext("2d"))}}}};torch.Group=function(){torch.giveSmartCTM(this);torch.setupAsObjectListener(this);this.maxSimulTouches=100;this.requestRedraw=function(){if(this.listeners!=null){for(var a=0;a<this.listeners.length;a++){this.listeners[a].requestRedraw()}}};this.draw=function(d){var a=this.currentTransform;d.save();d.transform(a.a,a.b,a.c,a.d,a.e,a.f);for(var c=0;c<this.speakingObjects.length();c++){var b=this.speakingObjects.getByIndex(c);if(b.draw!=null){b.draw(d)}}d.restore()};this.hitDetect=function(h,g,b){var f=false;var e=this.currentTransform;var c=this.currentTransform.inverse();var a=c.a*h+c.c*g+c.e;var j=c.b*h+c.d*g+c.f;b.save();b.transform(e.a,e.b,e.c,e.d,e.e,e.f);for(var d=0;d<this.speakingObjects.length();d++){f=f||this.speakingObjects.getByIndex(d).hitDetect(a,j,b);if(f){d=this.speakingObjects.length()}}b.restore();return f};this.oncanvasdrawn=this.onmouseup=this.onmouseout=this.onmousemove=this.onmousedown=this.ondblclick=this.onmouseover=function(k,j,h,b){var g=this.currentTransform;var d=this.currentTransform.inverse();var a=d.a*k+d.c*j+d.e;var l=d.b*k+d.d*j+d.f;b.save();b.transform(g.a,g.b,g.c,g.d,g.e,g.f);for(var f=0;f<this.speakingObjects.length();f++){var c=this.speakingObjects.getByIndex(f);torch.helperMethods.evaluateAndDelegateMouseEvent(c,a,l,h,b.canvas)}b.restore()};this.ontouchstart=this.ontouchend=this.ontouchmove=function(l,k,j,b,g){var h=this.currentTransform;var d=this.currentTransform.inverse();var a=d.a*l+d.c*k+d.e;var m=d.b*l+d.d*k+d.f;b.save();b.transform(h.a,h.b,h.c,h.d,h.e,h.f);for(var f=0;f<this.speakingObjects.length();f++){var c=this.speakingObjects.getByIndex(f);torch.helperMethods.evaluateAndDelegateTouchEvent(c,a,m,j,b.canvas,g)}b.restore()}};torch.Group.prototype=new torch.lib.baseTorchObject();torch.setupAsObjectListener=function(a){if(a.speakingObjects!=null){return}a.speakingObjects=new torch.Map();a.add=torch.helperMethods.addInteractiveObject;a.remove=function(b){this.speakingObjects.remove(b)};a.getByIndex=function(b){return this.speakingObjects.getByIndex(b)};a.getByKey=function(b){return this.speakingObjects.getByKey(b)};a.length=function(){return this.speakingObjects.length()}};torch.helperMethods.addInteractiveObject=function(b,a){this.speakingObjects.add(b,a);torch.helperMethods.setupInteractiveObject(a);if(a.onHasBeenAdded!=null){a.onHasBeenAdded(this,b)}a.listeners.push(this)};torch.helperMethods.setupInteractiveObject=function(a){if(a.listeners!=null){return}a.listeners=[];a.requestRedraw=torch.helperMethods.requestRedraw;a.giveCanvasFocus=torch.helperMethods.giveCanvasFocus;a.clearCanvasFocus=torch.helperMethods.clearCanvasFocus;a.hasCanvasFocus=false;a.isMouseOver=false;a.isTouchOver=false;a.maxSimulTouches=a.maxSimulTouches||1;a.currentTouchCount=a.currentTouchCount||0};torch.helperMethods.browserHasCanvas=function(){return !!(document.createElement("canvas").getContext("2d"))};torch.setCanvasResolution=function(b,e,a,f){var d=e||window.devicePixelDensity||1;if(!a){b.style.width=""+b.width+"px";b.style.height=""+b.height+"px";b.width=b.width*d;b.height=b.height*d}else{b.width=b.clientWidth*d;b.height=b.clientWidth*d}b.pixelDensity=d;if(!f){var c=b.getContext("2d");c.save();c.scale(d,d)}};torch.transformAcrossColocatedContexts=function(j,g,e){var f=e.currentTransform.inverse();var i=j.x;var h=j.y;var d=f.a*i+f.c*h+f.e;var c=f.b*i+f.d*h+f.f;i=d;h=c;f=g.currentTransform;var b=f.a*i+f.c*h+f.e;var a=f.b*i+f.d*h+f.f;return new torch.point2d(b,a)};torch.getNewSVGMatrix=function(){return new torch.helperMethods.SVGMatrix();try{var a=document.createElementNS("http://www.w3.org/2000/svg","svg");return a.getCTM()}catch(b){return new torch.helperMethods.SVGMatrix()}};torch.helperMethods.SVGMatrix=function(){this.a=1;this.b=0;this.c=0;this.d=1;this.e=0;this.f=0;this.multiply=function(b){var a=this;var c=torch.getNewSVGMatrix();c.a=b.a*a.a+b.b*a.c;c.b=b.a*a.b+b.b*a.d;c.c=b.c*a.a+b.d*a.c;c.d=b.c*a.b+b.d*a.d;c.e=b.e*a.a+b.f*a.c+a.e;c.f=b.e*a.b+b.f*a.d+a.f;a.a=c.a;a.b=c.b;a.c=c.c;a.d=c.d;a.e=c.e;a.f=c.f;return a};this.inverse=function(){var b=this;var c=torch.getNewSVGMatrix();var a=b.a*b.d-b.b*b.c;c.a=b.d/a;c.b=(-b.b)/a;c.c=(-b.c)/a;c.d=b.a/a;c.e=(b.c*b.f-b.e*b.d)/a;c.f=(b.b*b.e-b.a*b.f)/a;return c};this.translate=function(a,c){var b=this;b.e=b.a*a+b.c*c+b.e;b.f=b.b*a+b.d*c+b.f;return b};this.scale=function(a){return this.scaleNonUniform(a,a)};this.scaleNonUniform=function(a,c){var b=this;b.a*=a;b.b*=a;b.c*=c;b.d*=c;return b};this.rotate=function(b){var a=this;var e=torch.getNewSVGMatrix();var f=Math.cos(b*Math.PI/180);var d=Math.sin(b*Math.PI/180);e.a=a.a*f+a.c*d;e.b=a.b*f+a.d*d;e.c=a.c*f-a.a*d;e.d=a.d*f-a.b*d;a.a=e.a;a.b=e.b;a.c=e.c;a.d=e.d;return a};this.rotateFromVector=function(a,c){var b=Math.atan2(c,a);return this.rotate(b*180/Math.PI)};this.flipX=function(){return this.multiply(-1,0,0,1,0,0)};this.flipY=function(){return this.multiply(1,0,0,-1,0,0)};this.skewX=function(a){return this};this.skewY=function(a){return this}};torch.giveSmartCTM=function(a){if(a.currentTransform!=null){return}if(a.translate!=null){a.nativeTranslate=a.translate}if(a.scale!=null){a.nativeScale=a.scale}if(a.rotate!=null){a.nativeRotate=a.rotate}if(a.transform!=null){a.nativeTransform=a.transform}if(a.setTransform!=null){a.nativeSetTransform=a.setTransform}if(a.save!=null){a.nativeSave=a.save}if(a.restore!=null){a.nativeRestore=a.restore}if(a.resetTransform!=null){a.nativeResetTransform=a.resetTransform}a.currentTransform=torch.getNewSVGMatrix();a.currentTransformStack=[];a.translate=function(b,c){this.currentTransform=this.currentTransform.translate(b,c);if(this.nativeTranslate!=null){this.nativeTranslate(b,c)}};a.scale=function(b,c){this.currentTransform=this.currentTransform.scaleNonUniform(b,c);if(this.nativeScale!=null){this.nativeScale(b,c)}};a.rotate=function(b){this.currentTransform=this.currentTransform.rotate(b*180/Math.PI);if(this.nativeRotate!=null){this.nativeRotate(b)}};a.transform=function(h,g,m,l,j,i){var k=torch.getNewSVGMatrix();k.a=h;k.b=g;k.c=m;k.d=l;k.e=j;k.f=i;this.currentTransform=this.currentTransform.multiply(k);if(this.nativeTransform!=null){this.nativeTransform(h,g,m,l,j,i)}};a.setTransform=function(h,g,l,k,j,i){this.currentTransform=torch.getNewSVGMatrix();this.transform(h,g,l,k,j,i);if(this.nativeSetTransform!=null){this.nativeSetTransform(h,g,l,k,j,i)}};a.save=function(){var b=this.currentTransform;var c=torch.getNewSVGMatrix();c.a=b.a;c.b=b.b;c.c=b.c;c.d=b.d;c.e=b.e;c.f=b.f;this.currentTransformStack.push(c);if(this.nativeSave!=null){this.nativeSave()}};a.restore=function(){var b=this.currentTransform;if(this.currentTransformStack.length>0){var c=this.currentTransformStack.pop();b.a=c.a;b.b=c.b;b.c=c.c;b.d=c.d;b.e=c.e;b.f=c.f}else{this.resetTransform()}if(this.nativeRestore!=null){this.nativeRestore()}};a.resetTransform=function(){this.currentTransform=torch.getNewSVGMatrix();if(this.nativeResetTransform!=null){this.nativeResetTransform()}}};torch.setupScaling=function(f,b,e){var d=f||1;var g=b||-1;torch.isInApp=true;this.scaleHelper.canvasCssWidth=g;this.scaleHelper.viewportScale=d;var a=document.getElementsByTagName("head")[0];var c=document.createElement("style");c.type="text/css";c.innerText="canvas{-webkit-tap-highlight-color:rgba(0,0,0,0); -webkit-touch-callout:none;} ";a.appendChild(c);if(e){this.scaleHelper.setupViewport()}};torch.scaleHelper={canvasCssWidth:-1,viewportScale:-1,setupViewport:function(){var a=document.querySelector("meta[name=viewport]");if(a!=null){a.setAttribute("content","target-densitydpi=device-dpi, width=device-width, initial-scale="+this.viewportScale+", user-scalable=no")}},canvasPixelToAppPixel:function(c,a){var d=c;d/=a.pixelDensity;if(this.viewportScale>0){d/=viewportScale}if(this.canvasCssWidth>0&&a.width>0){var b=this.canvasCssWidth/a.width;d/=b}return d},appPixelToCanvasPizel:function(d,a){var e=d;e*=a.pixelDensity;if(this.viewportScale>0){e*=viewportScale}if(this.canvasCssWidth>0&&a.width>0){var c=this.canvasCssWidth/a.width;e*=c}var b=a.getContext("2d");if(b.resolution!=null){e*=b.resolution}return e}};torch.canSendAppMessages=false;torch.appMessagePrefix="app:";torch.setAppAcceptsMessages=function(a){torch.canSendAppMessages=a};torch.sendMessageToApp=function(a){if(torch.canSendAppMessages){window.location=""+torch.appMessagePrefix+a}};torch.Map=function(){this.keys=new Array();this.values=new Object();this.add=function(a,b){this.keys.push(a);this.values[a]=b};this.length=function(){return this.keys.length};this.getByKey=function(a){return this.values[a]};this.getByIndex=function(a){var b=this.keys[a];return this.values[b]};this.remove=function(b){this.values[b]=null;for(var a=0;a<this.keys.length;a++){if(this.keys[a]==b){this.keys.splice(a,1);return true}}return false}};torch.point2d=function(a,b){this.x=a||0;this.y=b||0};torch.globalToLocal=function(g,f,h){var j=0-window.scrollX;var i=0-window.scrollY;var b=h;while(b.offsetParent!=null){j+=b.offsetLeft+b.clientLeft;i+=b.offsetTop+b.clientTop;b=b.offsetParent}var e=g-j;var d=f-i;var c=e;var a=d;return new torch.point2d(c,a)};torch.localToGlobal=function(h,f,a){var j=0;var i=0;var c=a;var b;var g=false;b=window.getComputedStyle(c,null);g=b.getPropertyValue("border-left-style")!="none";if(g){var e=b.getPropertyValue("border-left-width");switch(e){case"thin":j-=2;i-=2;break;case"medium":j-=4;i-=4;break;case"thick":j-=6;i-=6;break;default:var d=e.substring(0,e.indexOf("px"));j-=d;i-=d;break}}while(c.offsetParent!=null){j+=c.offsetLeft+c.clientLeft;i+=c.offsetTop+c.clientTop;c=c.offsetParent}return new torch.point2d(h+j,f+i)};torch.localToOtherLocal=function(b,e,d,c){var a=torch.localToGlobal(b,e,d);return torch.globalToLocal(a.x,a.y,c)};torch.anim=new Object();torch.anim.stop=0;torch.anim.bounce=1;torch.anim.loop=2;torch.anim.LinearAnimation=function(e,a,h,g,c,b,d,f){this.min=e||0;this.max=a||1;this.dif=this.max-this.min;this.start=c||this.min;this.maxFrame=h-1||0;this.bounce=g||torch.anim.stop;this.direction=b||1;this.easeForward=d||new torch.anim.noEase();this.easeBackward=f||(this.easeForward||new torch.anim.noEase());this.done=false;this.frame=Math.round(((this.start-this.min)/this.dif)*this.maxFrame);this.currVal=this.start;this.tick=function(){if(this.done){return}if(this.bounce==torch.anim.bounce){if(this.frame>=this.maxFrame&&this.direction>0){this.direction*=-1}else{if(this.frame<=0&&this.direction<0){this.direction*=-1}}}else{if(this.bounce==torch.anim.loop){if(this.frame>=this.maxFrame&&this.direction==1){this.frame=-1}else{if(this.frame<=0&&this.direction==-1){this.frame=this.maxFrame+1}}}else{if(this.bounce==torch.anim.stop){if(this.frame>=this.maxFrame&&this.direction==1){this.done=true;return}else{if(this.frame<=0&&this.direction==-1){this.done=true;return}}}}}if(this.direction>0){this.currVal=this.easeForward.get(this.min,this.dif,this.frame/this.maxFrame)}else{this.currVal=this.easeBackward.get(this.max,-this.dif,1-(this.frame/this.maxFrame))}this.frame+=1*this.direction};this.get=function(){return this.currVal}};torch.anim.noEase=function(){this.get=function(c,b,a){return c+b*a}};torch.anim.easeIn=function(){return new torch.anim.easeBezier(new torch.point2d(0.2,0.8),new torch.point2d(0.5,0.9))};torch.anim.easeOut=function(){return new torch.anim.easeBezier(new torch.point2d(0.8,0.2),new torch.point2d(0.9,0.5))};torch.anim.easeBezier=function(b,a){this.p1=b;this.p2=a;this.get=function(g,f,d){var e=this.doBez(d,this.t,this.b,this.s);var c=g+f*e;return c};this.doBez=function(d,e,c,g){var f,i;var e=0.5;var c=0.0005;var g=e/2;this.bez=function(j,h){f=1-e;return 3*f*f*e*j+3*e*e*f*h+e*e*e};while(g>c){i=this.bez(b.x,a.x);if(Math.abs(i-d)<c){return this.bez(b.y,a.y)}else{if(i>d){e-=g;g/=2}else{if(i<d){e+=g;g/=2}}}}return this.bez(b.y,a.y)}};